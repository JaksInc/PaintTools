<!DOCTYPE html>
<html>
<head>
    <title>Paint Tools Alpha</title>
    <script src="common.js"></script>
</head>
<body>
    <h1 id="page-title">Formula Resizer</h1>
    <div id="colorsContainer">
        <div id="colorA" class="color">
            <div class="formulaRow">
                <select class="selectedColor"></select>
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
            </div>
            <div class="formulaRow">
                <select class="selectedColor"></select>
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
            </div>
            <div class="formulaRow">
                <select class="selectedColor"></select>
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
            </div>
            <div class="formulaRow">
                <select class="selectedColor"></select>
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
            </div>
            <div class="formulaRow">
                <select class="selectedColor"></select>
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
            </div>
        </div>
    </div>
    <div id="sizeSelectors">
        <select id="originalSize">
            <option value="8">8 oz</option>
            <option value="32">Quart</option>
            <option value="128">Gallon</option>
            <option value="640">5 Gallon</option>
        </select><select id="newSize">
            <option value="8">8 oz</option>
            <option value="32">Quart</option>
            <option value="128">Gallon</option>
            <option value="640">5 Gallon</option>
        </select>
    </div>
    <button id="resizeButton">Resize</button>

    <h1>Results</h1>
    <div id="resultsArea">
        <table id="resultsTable">
            <tr id="resultColorNames"></tr>
            <tr id="resultOunces"></tr>
            <tr id="resultDrops"></tr>
        </table>
    </div>
    <script>
        function resize(originalFormula, originalSize, newSize) {
            let scaleFactor = newSize / originalSize;
            let resizedFormula = {};
            for (const colorant in originalFormula) {
                if (colorant == "Select color") {
                    continue;
                }
                let totalDrops = (originalFormula[colorant][0] * 384) + originalFormula[colorant][1];
                let resizedDrops = totalDrops * scaleFactor;
                let resizedOunces = Math.floor(resizedDrops / 384);
                let resizedDropsRemainder = Math.floor((resizedDrops % 384) * 100) / 100;
                resizedFormula[colorant] = [resizedOunces, resizedDropsRemainder];
            }
            return resizedFormula;
        }

        const resizeButton = document.getElementById("resizeButton");
        resizeButton.addEventListener("click", function () {
            let originalFormula = createFormulas("#colorsContainer");
            let originalSize = +document.getElementById("originalSize").value;
            let newSize = +document.getElementById("newSize").value;
            let resizedFormula = resize(originalFormula[0], originalSize, newSize);
            displayResults(resizedFormula);
        })
    </script>
</body>
</html>
