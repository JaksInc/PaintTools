<!DOCTYPE html>
<html>

<head>
        <title>Paint Tools Alpha</title>
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
        <!-- This section is for PWA stuff -->
        <link rel="stylesheet" href="all-pages.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <meta name="description" content="Tools for the paint desk.">
        <meta name="theme-color" content="#888888">
        <link rel="manifest" href="manifest.json">
        <script>
            if ("serviceWorker" in navigator) {
                window.addEventListener("load", function() {
                    navigator.serviceWorker.register("sw.js");
                });
            }
        </script>
        <!-- End PWA stuff -->
</head>

<body>
    <h1 id="page-title">Color Scaler</h1>
    <div id="colorsContainer">
        <div id="colorA" class="color">
            <div id="colorSelectorRowA">
                <select class="selectedColor">
                    <option value="Select color">Select color</option>
                    <option value="AXL">AXL</option>
                    <option value="BL">BL</option>
                    <option value="CL">CL</option>
                    <option value="DL">DL</option>
                    <option value="EL">EL</option>
                    <option value="FL">FL</option>
                    <option value="IL">IL</option>
                    <option value="JL">JL</option>
                    <option value="KXL">KXL</option>
                    <option value="LL">LL</option>
                    <option value="RL">RL</option>
                    <option value="RUL">RUL</option>
                    <option value="TL">TL</option>
                    <option value="VL">VL</option>
                    <option value="VUL">VUL</option>
                    <option value="YL">YL</option>
                </select>
                <select class="selectedColor">
                    <option value="Select color">Select color</option>
                    <option value="AXL">AXL</option>
                    <option value="BL">BL</option>
                    <option value="CL">CL</option>
                    <option value="DL">DL</option>
                    <option value="EL">EL</option>
                    <option value="FL">FL</option>
                    <option value="IL">IL</option>
                    <option value="JL">JL</option>
                    <option value="KXL">KXL</option>
                    <option value="LL">LL</option>
                    <option value="RL">RL</option>
                    <option value="RUL">RUL</option>
                    <option value="TL">TL</option>
                    <option value="VL">VL</option>
                    <option value="VUL">VUL</option>
                    <option value="YL">YL</option>
                </select>
                <select class="selectedColor">
                    <option value="Select color">Select color</option>
                    <option value="AXL">AXL</option>
                    <option value="BL">BL</option>
                    <option value="CL">CL</option>
                    <option value="DL">DL</option>
                    <option value="EL">EL</option>
                    <option value="FL">FL</option>
                    <option value="IL">IL</option>
                    <option value="JL">JL</option>
                    <option value="KXL">KXL</option>
                    <option value="LL">LL</option>
                    <option value="RL">RL</option>
                    <option value="RUL">RUL</option>
                    <option value="TL">TL</option>
                    <option value="VL">VL</option>
                    <option value="VUL">VUL</option>
                    <option value="YL">YL</option>
                </select>
                <select class="selectedColor">
                    <option value="Select color">Select color</option>
                    <option value="AXL">AXL</option>
                    <option value="BL">BL</option>
                    <option value="CL">CL</option>
                    <option value="DL">DL</option>
                    <option value="EL">EL</option>
                    <option value="FL">FL</option>
                    <option value="IL">IL</option>
                    <option value="JL">JL</option>
                    <option value="KXL">KXL</option>
                    <option value="LL">LL</option>
                    <option value="RL">RL</option>
                    <option value="RUL">RUL</option>
                    <option value="TL">TL</option>
                    <option value="VL">VL</option>
                    <option value="VUL">VUL</option>
                    <option value="YL">YL</option>
                </select>
                <select class="selectedColor">
                    <option value="Select color">Select color</option>
                    <option value="AXL">AXL</option>
                    <option value="BL">BL</option>
                    <option value="CL">CL</option>
                    <option value="DL">DL</option>
                    <option value="EL">EL</option>
                    <option value="FL">FL</option>
                    <option value="IL">IL</option>
                    <option value="JL">JL</option>
                    <option value="KXL">KXL</option>
                    <option value="LL">LL</option>
                    <option value="RL">RL</option>
                    <option value="RUL">RUL</option>
                    <option value="TL">TL</option>
                    <option value="VL">VL</option>
                    <option value="VUL">VUL</option>
                    <option value="YL">YL</option>
                </select>
            </div>
            <div id="ouncesRowA">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
            </div>
            <div id="dropsRowA">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
            </div>
            <div id="scalingRow">
                <input class="percentage" placeholder="Percentage" type="number" min="-1000" max="1000">
                <input class="percentage" placeholder="Percentage" type="number" min="-1000" max="1000">
                <input class="percentage" placeholder="Percentage" type="number" min="-1000" max="1000">
                <input class="percentage" placeholder="Percentage" type="number" min="-1000" max="1000">
                <input class="percentage" placeholder="Percentage" type="number" min="-1000" max="1000">

            </div>
        </div>
    </div>
    <button id="scaleButton">Scale</button>
    <h1>Results</h1>
    <div id="resultsArea">
        <table id="resultsTable">
            <tr id="resultColorNames">
            </tr>
            <tr id=resultOunces>
            </tr>
            <tr id=resultDrops>
            </tr>
        </table>

    </div>
</body>

<!-- Navigation bar -->
<nav>
    <li>
        <a href="scaler.html" class="active">Scale</a>
    </li><li>
        <a href="combiner.html">Combine</a>
    </li><li>
        <a href="resizer.html">Resize</a>
    </li><li>
        <a class="externalWebsite" href="https://encycolorpedia.com/">Encycolorpedia</a>
    </li><li>
        <a class="externalWebsite" href="https://www.easyrgb.com/en/match.php">EasyRGB</a>
    </li>
</nav>
</html>

<script>
    //Adds event listeners for the two buttons
    const scaleButton = document.querySelector("#scaleButton");
    scaleButton.addEventListener("click", scale);
    //Gets our layoutcontainer for adding rows
    const colorContainer = document.querySelector("#colorA");

    function createFormulas(container) {
        let formulas = []; //start up the list
        let table = document.querySelector(container);
        for (i = 0; i < table.children.length; i++) { //Iterates through each table
            let color = {}; //start up the dictionary
            for (j = 0; j < 5; j++) { //Iterates through each column. i is the table, j is the column
                let colorant = table.children[i].children[0].children[j].value;
                let ounces = + table.children[i].children[1].children[j].value;
                let drops = + table.children[i].children[2].children[j].value;
                //specific for scaler
                let percentage = + table.children[i].children[3].children[j].value;
                color[colorant] = [ounces, drops, percentage];
            }
            formulas.push(color);
        }
        return formulas;
    }

    function scale() {
        formula = createFormulas("#colorsContainer")[0];
        let scaledFormula = {};
        for (colorant in formula) {
            if (colorant == "Select color") {
                continue;
            }
            let totalDrops = ((formula[colorant][0] * 384) + formula[colorant][1]) * (formula[colorant][2] / 100)
            let ounces = Math.floor(totalDrops / 384);
            let drops = Math.floor((totalDrops % 384) * 100) / 100;
            scaledFormula[colorant] = [ounces, drops];
        };
        displayResults(scaledFormula)
    }

    function displayResults(formula) {
        let resultsTable = document.getElementById("resultsTable");
        //clear results table
        for (i = 0; i < resultsTable.children.length; i++) {
            for (j = 0; j < resultsTable.children[i].children.length; j++) {
                resultsTable.children[i].children[j].innerHTML = "";
            }
        }
        let resultColorNames = document.getElementById("resultColorNames");
        let resultOunces = document.getElementById("resultOunces");
        let resultDrops = document.getElementById("resultDrops");
        for (colorant in formula) {
            if (colorant == "Select color") {
                continue;
            }
            let colorName = document.createElement("th");
            colorName.innerHTML = colorant;
            resultColorNames.appendChild(colorName);
            let ounces = document.createElement("td");
            ounces.innerHTML = formula[colorant][0];
            resultOunces.appendChild(ounces);
            let drops = document.createElement("td");
            drops.innerHTML = formula[colorant][1];
            resultDrops.appendChild(drops);
        }
    }

</script>