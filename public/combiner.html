<!DOCTYPE html>
<html>
<head>
    <title>Paint Tools Alpha</title>
    <script src="common.js"></script>
</head>
<body>
    <h1 id="page-title">Color Combiner</h1>
    <div id="colorsContainer">
        <div id="colorA" class="color">
            <div id="colorSelectorRowA">
                <select class="selectedColor"></select>
                <select class="selectedColor"></select>
                <select class="selectedColor"></select>
                <select class="selectedColor"></select>
                <select class="selectedColor"></select>
            </div>
            <div id="ouncesRowA">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
            </div>
            <div id="dropsRowA">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
            </div>
        </div>
        <div id="colorB" class="color">
            <div id="colorSelectorRow">
                <select class="selectedColor"></select>
                <select class="selectedColor"></select>
                <select class="selectedColor"></select>
                <select class="selectedColor"></select>
                <select class="selectedColor"></select>
            </div>
            <div id="ouncesRowB">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
                <input class="ounces" placeholder="Ounces" type="number" min="0" max="100">
            </div>
            <div id="dropsRowB">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
                <input class="drops" placeholder="Drops" type="number" min="0" max="383">
            </div>
        </div>
    </div>

    <button id="combineButton">Combine</button>
    <h1>Results</h1>
    <div id="resultsArea">
        <table id="resultsTable">
            <tr id="resultColorNames"></tr>
            <tr id="resultOunces"></tr>
            <tr id="resultDrops"></tr>
        </table>
    </div>
    <script>
        function combineColors(colorA, colorB) {
            var newColor = {};
            for (var color in colorA) {
                let totalDropsDivideHalf = ((colorA[color][0] * 384) + colorA[color][1]) / 2;
                let newOunces = Math.floor(totalDropsDivideHalf / 384);
                let newDrops = Math.round((totalDropsDivideHalf % 384) * 2) / 2;
                newColor[color] = [newOunces, newDrops];
            }
            for (var color in colorB) {
                let totalDropsDivideHalf = ((colorB[color][0] * 384) + colorB[color][1]) / 2;
                let newOunces = Math.floor(totalDropsDivideHalf / 384);
                let newDrops = Math.round((totalDropsDivideHalf % 384) * 2) / 2;
                if (color in newColor) {
                    newColor[color][0] += newOunces;
                    newColor[color][1] += newDrops;
                    if (newColor[color][1] > 383) {
                        newColor[color][0] += 1;
                        newColor[color][1] -= 384;
                    }
                }
                else {
                    newColor[color] = [newOunces, newDrops];
                }
            }
            return newColor;
        }

        const combineButton = document.querySelector("#combineButton");
        combineButton.addEventListener("click", combineButtonClicked);
        function combineButtonClicked() {
            let colors = createFormulas("#colorsContainer");
            let combinedColor = combineColors(colors[0], colors[1]);
            displayResults(combinedColor);
        }
    </script>
</body>
</html>
